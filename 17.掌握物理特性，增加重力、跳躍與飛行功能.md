# 17. 掌握物理特性，增加重力、跳躍與飛行功能

## 電玩物理學

有沒有看過隔壁鄰居使出過馬力歐蹬牆跳(Wall jump)呢?

![](/img/17/arcade17_01.gif)

有的時候遇到障礙物阻擋，擁有跑酷能力的人，或許就會像馬力歐一樣，使出蹬牆跳往上找出路。在 MakeCode Arcade 的世界中，需要引入物理學知識，透過[電玩物理學](https://www.tenlong.com.tw/products/9789863475408#)的各種原理，來建立符合現實的互動遊戲。

![](/img/17/arcade17_02.png)

電玩物理學大致上有這些相關主題，有興趣的讀者可以去圖書館借閱。

‧經典力學的知識: 包含運動學、力學、動力學和碰撞反應
‧剛體動力學: 運用2D和3D的即時模擬處理旋轉和慣性運動
‧將物理觀念應用於真實世界中：模擬船隻、飛機、汽車和球類運動
‧擴充遊戲對於數位物理的應用，像是加速度計、觸控螢幕、GPS、光學追蹤裝置和3D顯示

## 電子遊戲中的物理特性

**電玩物理學** 是指管理遊戲世界中物體的規則和行為。它決定了物件如何移動、碰撞和相互作用。在 Microsoft MakeCode Arcade 中，您可以利用物理原理使您的遊戲更加逼真和令人興奮。

我們這次的教學文會著重在遊戲物理學的兩個方面：重力和碰撞檢測。

### 重力

重力是一種將物體拉向地面的作用力。在 MakeCode Arcade 中，您可以通過 **角色積木** 中的添加沿垂直方向 （ay） 的加速度來類比重力，來建立逼真的重量和運動感。

![](/img/17/arcade17_03.png)

通過對遊戲中不同角色套用不同的重力加速度，他們可以像受重力影響一樣墜落、漂浮和移動。

一開始很容易會找不到控制重力加速度的積木，其實加速度的選項是放在選單中。這是初學者很容易發生的問題，請小心。

![](/img/17/arcade17_04.png)

![](/img/17/arcade17_05.png)

嘗試設定不同的 y 方向加速度 ay 值來達到您想要的效果。

![](/img/17/arcade17_06.png)

請記住，較強的重力值會使物體下落得更快，而較弱的重力值會導致下降速度較慢，而反方向的重力值會讓物體漂浮或飛行。

![](/img/17/arcade17_07.png)

### 檢測碰撞

碰撞檢測是電腦確定兩個物體何時相互接觸的方法。在 MakeCode Arcade 中，您可以通過重疊事件(Overlap)實現碰撞檢測，來建立互動式和回應式遊戲。例如，您可以檢查玩家的角色是否撞到牆壁、碰到敵人或是吃到金幣。

當發生碰撞時，您可以觸發特定動作，例如降低玩家的生命值或增加遊戲分數。通過設定檢測碰撞事件，可以為遊戲添加更多挑戰。


這段積木程式，程式會檢測玩家何時與樹木重疊，當小鴨撞到樹時，遊戲結束。

![](/img/17/arcade17_08.png)

### 跳躍與飛行


跳要與飛行是遊戲中常見的機制，當你將將角色送上空中時，需要考慮的不僅僅是它是否回得來。

為了讓你的角色飛起來，他本身需要有向上運動動力。通常是通過設置其垂直速度 （vy） 來實現的，該速度也稱為角色在 **上升** 或 **下降**方向的行進速度。

如果你把角色的垂直速度設定為負數（假設沒有重力值與空氣摩擦力阻礙），你的主角就會飛向天空，永遠不會回來！


每次按下（A）按鈕時將 vy 設定為負數，這樣才能飛起來。

有些遊戲，比如 [Flappy Bird](https://flappybird.io/)，依賴於重力機制，你必須在每次按下按鈕時克服這個機制。每次你推動空格鍵時，你的鳥都會飛得更高，但當你停下來時，重力會把你拉回地面。

![Flappy Bird](https://www.raspberrypi.com/app/uploads/2019/12/flappy-bird-1.jpg)

更進階的版本是檢查你的角色是否已經在地面上，然後再讓它再次起飛。這比較像是跳躍的動作。

### 為跳躍做準備

跳躍從往上飛開始，以角色返回地面結束。為了實現這一點，您需要在重力加速度外，還要有一個負加速度。

在遊戲中設定正加速度將產生向螢幕底部的持續「拉力」。如果你然後按下 （A） 按鈕則會加上負速度，角色會暫時向上移動，直到加速度超過速度，你又會再次下降。

確保完全跳躍的訣竅是確保 （A） 按鈕內的動作在精靈回到地面之前不會再次運行。


我們的這段程式稱為 **重力跳躍**。

![](/img/17/arcade17_09.png)

![](/img/17/arcade17_10.png)


好的，你現在已經學了重力加速度控制跳躍與飛行了!

## 程式碼

我們來參考官方的火雞跳耀遊戲的教學程式碼，您就會更清楚怎麼寫出相關遊戲程式。

* [https://arcade.makecode.com/36879-40507-26967-39713](https://arcade.makecode.com/36879-40507-26967-39713)

![](/img/17/arcade17_11.png)

![](/img/17/arcade17_12.png)

![](/img/17/arcade17_13.png)

![](/img/17/arcade17_14.png)

![](/img/17/arcade17_15.png)

![](/img/17/arcade17_16.png)

## 參考資料

1. [Mario Wall Jump](https://www.mariowiki.com/Wall_Jump)
2. [電玩物理學](https://www.tenlong.com.tw/products/9789863475408)
3. [Flappy Bird](https://zh.wikipedia.org/zh-tw/Flappy_Bird)