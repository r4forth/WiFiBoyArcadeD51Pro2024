# 26. 硬體整合應用介紹

## 玩學機與燈環整合應用

需要新增的延伸套件有

1. Controller
2. Light

![](/img/26/arcade26_01.png)

![](/img/26/arcade26_02.png)

加入 Controller 延伸套件後，主要會出先一些跟硬體有關的額外控制積木，像是玩學機獨有的加速度感測器，就可以搭配「當姿勢晃動」這個積木來使用。

![](/img/26/arcade26_03.png)

加入 Light 延伸套件後，會增加幾種 LED 燈帶的應用積木。

![](/img/26/arcade26_04.png)


我們先來試做一個簡單的燈環點亮程式。

![](/img/26/arcade26_05.png)

1. 啟動燈環的腳位是 TX 腳，因為我們的燈環有 12個 LED 燈，所以像素點要設定為 12。
2. 設定燈條亮度，設定成 10 就可以。
3. 選擇動畫形式，內建有彩虹燈，持續 0.5 秒。


第二個範例，我們跟玩學機的螢幕畫面搭配，並使用加速度感測器，變成一個電子骰子。

![](/img/26/arcade26_06.png)

1. 選一個角色，設定一個圖案，例如我們選一個蘋果。
2. 加入遊戲提示，提示訊息為「搖一搖」。
3. 設定燈條為 **WS2812**，設定腳位為 **TX**，像素點為 12。
4. 設定燈條亮度，設定成 10 就可以。
5. 設定燈為紅色，位置為 0 。
6. 選擇控制器，選擇 **當姿勢晃動發生** 積木。
7. 加入重複迴圈，並在設定條件設為 **隨機取數 50 到 100**
8. 執行 **燈條移動旋轉一點**
9. 當燈移動時，也趁機播提示音 **高音B**。

![](/img/26/arcade26_07.gif)


## 玩學機能否搭配硬體元件來進行實驗?

以前許多老師拿到 WiFiBoy D51 機器，會以為只能拿來做 Arcade 復古遊戲，進行軟體程式設計教學。其實在 MakeCode 平台的規劃，其實是可以拿來做硬體實驗教學的。不過 Maker.makecode.com 平台還在發展中，還有待開發者放出更多的教學文件，才能讓使用者更容易學習。

請參考 https://maker.makecode.com

![](/img/26/arcade26_08.png)

本日我們就來介紹一些基礎功能，讓您也可以搭配一些元件來操作使用。

## 如何讓 D51 可以在 maker.makecode.com 使用 

1. 請選擇 **Adafruit** 硬體中的 **Adafruit ItsyBitsy M4 Express** 硬體，並新增專案。

![](/img/26/arcade26_09.png)

2. 我們先做一個顯示彩虹燈的積木

![](/img/26/arcade26_10.png)

![](/img/26/arcade26_10_A.png)

3. 選擇硬體

![](/img/26/arcade26_11.png)

![](/img/26/arcade26_12.png)

![](/img/26/arcade26_13.png)

4. 產出 uf2 檔案，將 uf2 檔複製到 D51 的隨身碟內，彩虹燈即會亮起。

## 隨機亮燈的燈環

因為 maker.arcade.com 的 M4 積木沒有直接支援加速度計，所以沒有辦法直接支援 D51 的晃動功能，我們另外做了一個類似功能的電子積木，請參考底下的積木程式。

![](/img/26/arcade26_15.png)


## 參考資料

1. [Board: Adafruit Hardware](https://maker.makecode.com/boards/adafruit)
2. [pxt-maker](https://github.com/microsoft/pxt-maker)